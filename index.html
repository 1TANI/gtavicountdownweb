<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GTA VI COUNTDOWN - TANI</title>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>

  <style>
    @font-face {
      font-family: 'GTAArtDecoMedium';
      src: url('GTAArtDecoMedium.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      font-family: 'GTAArtDecoMedium', sans-serif;
      color: white;
      overflow: hidden;
    }

    /* Background layers */
    .background-layer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: opacity 0.5s ease-in-out;
      z-index: 1;
    }
    
    #bg1 {
      background-image: url('background/bg1.png');
      opacity: 1;
    }
    
    #bg2 {
      background-image: url('background/bg2.png');
      opacity: 0;
      pointer-events: none;
    }

    .content-wrapper {
      position: relative;
      z-index: 500;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100%;
      width: 100%;
    }

    .background-container {
      width: 900px;
      height: 188px;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      position: relative;
      border-radius: 7px;
      overflow: hidden;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.6);
      text-align: center;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    
    .overlay {
      background-color: rgba(0, 0, 0, 0.4); 
      height: 100%;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }

    .content {
      position: relative;
      z-index: 1;
    }

    .percentage {
      font-size: 50px;
      font-weight: bold;
      margin-bottom: -10px;
      text-shadow: 1px 1px 14px rgba(0, 0, 0, 3);
      color: white;
      animation: pulsateSize 7s ease-in-out infinite alternate;
    }

    @keyframes pulsateSize {
      0% {
        transform: scale(1);
      }
      100% {
        transform: scale(1.04);
      }
    }

    .days-text {
      font-size: 20px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      margin: 2px 0;
    }

    .days-text + .days-text {
      margin-top: 6px;
    }

    .days-since-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 6px;
    }

    .cycle-arrow {
      font-size: 16px;
      color: #cccccc;
      cursor: pointer;
      margin: 0 18px;
      transition: color 0.5s ease-in-out;
    }

    .cycle-arrow:hover {
      color: #7629ea;
    }

    .gtavidc-link {
      position: fixed;
      bottom: 10px;
      right: 10px;
      font-size: 13px;
      color: #8a34db;
      text-decoration: none;
      opacity: 0.8;
      z-index: 1000;
    }

    .gtavidc-link:hover {
      text-decoration: underline;
      opacity: 1;
    }

    .toolbar {
      position: fixed;
      bottom: 7px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(20, 20, 20, 0.50);
      padding: 10px 20px;
      border-radius: 5px;
      display: flex;
      gap: 22px; 
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      z-index: 1000;
    }

    .toolbar button {
      font-family: 'GTAArtDecoMedium', sans-serif;
      font-size: 14px;
      background-color: #971281;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      opacity: 0.9;
      transition: opacity 0.2s ease-in-out, background-color 0.2s ease-in-out;
    }

    .toolbar button:hover {
      opacity: 1;
      background-color: #8a34db;
    }
    .toolbar .settings-button img,
    .toolbar .achievements-button img {
      width: 20px; 
      height: 20px;
      vertical-align: middle; 
      filter: invert(1); 
    }
    .toolbar .settings-button,
    .toolbar .achievements-button {
      padding: 6px 12px; 
    }
    .info-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(20, 20, 20, 0.95);
      padding: 30px;
      border-radius: 12px;
      width: 300px;
      box-shadow: 0 0 20px black;
      z-index: 2000;
      text-align: center;
    }

    
    #settingsModal {
      display: none; 
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(20, 20, 20, 0.95);
      padding: 30px;
      border-radius: 12px;
      width: 300px;
      box-shadow: 0 0 20px black;
      z-index: 2000;
      text-align: center;
    }
    
    #achievementsModal {
      display: none; 
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(20, 20, 20, 0.95);
      padding: 30px;
      border-radius: 12px;
      width: 400px;
      max-height: 500px;
      overflow-y: auto;
      box-shadow: 0 0 20px black;
      z-index: 2000;
    }
    
    .info-modal h2, #settingsModal h2, #achievementsModal h2 {
      margin-top: 0;
      font-size: 20px;
      margin-bottom: 10px;
      text-align: center;
    }
    .info-modal p, #settingsModal p {
      font-size: 14px;
      color: #ccc;
    }
    .close-modal {
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 18px;
      color: #fff;
      cursor: pointer;
    }
    .close-modal:hover {
      color: #e74c3c;
    }
    .setting-option {
      margin-bottom: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 5px 0;
    }
    .setting-option label {
      font-size: 16px;
      color: #ccc;
      cursor: pointer; 
    }
    .setting-option input[type="checkbox"] {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 24px; 
      height: 24px;
      border: 2px solid #971281;
      border-radius: 4px;
      background-color: #333; 
      cursor: pointer;
      position: relative;
      transition: background-color 0.2s, border-color 0.2s;
    }

    .setting-option input[type="checkbox"]:checked {
      background-color: #8a34db; 
      border-color: #8a34db;
    }

    .setting-option input[type="checkbox"]:checked::before {
      content: '‚úì';
      display: block;
      color: white;
      font-size: 18px;
      text-align: center;
      line-height: 20px; 
    }
    
    /* Achievements styles */
    .achievement-item {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 5px;
      background-color: rgba(50, 50, 50, 0.5);
    }
    
    .achievement-icon {
      width: 40px;
      height: 40px;
      margin-right: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background-color: #8a34db;
    }
    
    .achievement-icon.unlocked {
      background-color: #8a34db;
    }
    
    .achievement-icon.locked {
      background-color: #333;
      color: #666;
    }
    
    .achievement-details {
      flex: 1;
      text-align: left;
    }
    
    .achievement-title {
      font-size: 16px;
      margin-bottom: 5px;
    }
    
    .achievement-description {
      font-size: 12px;
      color: #ccc;
    }
    
    .achievement-date {
      font-size: 12px;
      color: #999;
      margin-top: 3px;
    }
    
    .achievement-item.unlocked {
      opacity: 1;
    }
    
    .achievement-item.locked {
      opacity: 0.6;
    }
    
    /* New right arrow button styles */
    .right-arrow-button {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 40px;
      color: white;
      background-color: rgba(0, 0, 0, 0.3);
      border: none;
      border-radius: 5px;
      width: 50px;
      height: 80px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease-in-out, opacity 0.3s ease-in-out;
      opacity: 0.3;
      z-index: 1000;
    }
    
    .right-arrow-button:hover {
      opacity: 0.7;
      background-color: rgba(0, 0, 0, 0.5);
    }
    
    /* Date range text styles */
    .date-range-text {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
      text-align: center;
      margin-bottom: 10px;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    }
  </style>
</head>
<body>
  <!-- Background layers -->
  <div class="background-layer" id="bg1"></div>
  <div class="background-layer" id="bg2"></div>

  <div class="content-wrapper">
    <div class="background-container">
      <div class="overlay"></div>
      <div class="content">
        <div class="date-range-text" id="dateRangeText" style="display: none;">From May 2nd 2025, To November 4th</div>
        <div class="percentage" id="percentage">0.00%</div>
        <div class="days-text" id="daysLeft">Loading Days Left...</div>
        <div class="days-since-container">
          <span class="cycle-arrow" onclick="toggleDaysSinceMode('previous')">‚óÄ</span>
          <div class="days-text" id="daysSince">Loading Days Since...</div>
          <span class="cycle-arrow" onclick="toggleDaysSinceMode('next')">‚ñ∂</span>
        </div>
      </div>
    </div>
  </div>

  <button class="right-arrow-button" onclick="toggleCalculationMode()">></button>

  <a href="https://discord.com/invite/gta-vi" class="gtavidc-link" target="_blank">GTA 6 UNOFFICIAL DISCORD SERVER</a>

  <div class="toolbar">
    <button onclick="showInfo()">INFO</button>
    <button onclick="showAchievements()" class="achievements-button"><img src="trophy.png" alt="achievements"></button>
    <button onclick="showSettings()" class="settings-button"><img src="gear.png" alt="settings"></button>
    <button onclick="saveAsPNG()">SAVE AS PNG</button>
  </div>

  <div class="info-modal" id="infoModal">
    <div class="close-modal" onclick="hideInfo()">‚úñ</div>
    <h2>GTA VI COUNTDOWN - TANI</h2>
    <p>- this website shows current progress to GTA VI in percentages<br>
      - Counting from may 2nd when we got the date <br>
      - it's very simple I know, but it just works</p>
  </div>

  <div id="settingsModal">
    <div class="close-modal" onclick="hideSettings()">‚úñ</div>
    <h2>Settings</h2>
    <div class="setting-option">
      <label for="toggleArrows">Hide Cycle Arrows:</label>
      <input type="checkbox" id="toggleArrows">
    </div>
  </div>
  
  <div id="achievementsModal">
    <div class="close-modal" onclick="hideAchievements()">‚úñ</div>
    <h2>PROGRESS</h2>
    <div id="achievementsList">

    </div>
  </div>

  <script>
    
    // May 2nd 2025, 4:00 PM GMT+3 = 13:00 UTC
    const startDate = new Date('2025-05-02T13:00:00Z');
    
    // May 25th 2026, 6:00 AM GMT+3 = 03:00 UTC  
    const release = new Date('2026-05-25T03:00:00Z');
    
    // May 2nd 2025, 4:00 PM GMT+3 = 13:00 UTC 
    const altStartDate = new Date('2025-05-02T13:00:00Z');
    
    // Nov 4th 2025, 4:00 PM GMT+3 = 13:00 UTC 
    const altEndDate = new Date('2025-11-04T13:00:00Z');
    
    // May 6th 2025, 4:30 PM GMT+3 = 13:30 UTC
    const trailer2release = new Date('2025-05-06T13:30:00Z');

    const daysSinceModes = ['days', 'hours', 'minutes', 'seconds'];
    let currentDaysSinceModeIndex = 0;
    let secondsUpdateInterval;
    let isAlternativeMode = false;

const achievements = [
  { id: 1, title: "10%", description: "Reach 10% completion", targetPercentage: 10, targetDate: new Date('2025-06-10T07:12:00Z') },
  { id: 2, title: "20%", description: "Reach 20% completion", targetPercentage: 20, targetDate: new Date('2025-07-19T01:24:00Z') },
  { id: 3, title: "30%", description: "Reach 30% completion", targetPercentage: 30, targetDate: new Date('2025-08-26T19:36:00Z') },
  { id: 4, title: "38.1%", description: "Reach 38.1% completion", targetPercentage: 38.1, targetDate: new Date('2025-09-27T05:03:43Z') },
  { id: 5, title: "40%", description: "Reach 40% completion", targetPercentage: 40, targetDate: new Date('2025-10-04T13:48:00Z') },
  { id: 6, title: "50%", description: "Reach 50% completion", targetPercentage: 50, targetDate: new Date('2025-11-12T08:00:00Z') },
  { id: 7, title: "60%", description: "Reach 60% completion", targetPercentage: 60, targetDate: new Date('2025-12-21T02:12:00Z') },
  { id: 8, title: "69.42%", description: "Nice.", targetPercentage: 69.42, targetDate: new Date('2026-01-26T14:26:54Z') },
  { id: 9, title: "70%", description: "Reach 70% completion", targetPercentage: 70, targetDate: new Date('2026-01-28T20:24:00Z') },
  { id: 10, title: "90%", description: "Reach 90% completion", targetPercentage: 90, targetDate: new Date('2026-04-16T08:48:00Z') },
  { id: 11, title: "ULTIMATE LUCIA GTA 6", description: "Reach 100% completion", targetPercentage: 100, targetDate: new Date('2026-05-25T03:00:00Z') }
];

    function updateCountdownInfo() {
      const now = new Date();
      
      let percentage, daysLeft, daysSinceText;
      
      if (isAlternativeMode) {
        const total = altEndDate - altStartDate;
        const elapsed = now - altStartDate;
        percentage = (elapsed / total) * 100;
        percentage = Math.max(0, Math.min(100, percentage));
        
        daysLeft = Math.ceil((altEndDate - now) / (1000 * 60 * 60 * 24));
        document.getElementById('daysLeft').textContent = `${daysLeft} Days Left Until November 25th 2025          ( trailer 3 window )`;
        
        document.querySelector('.days-since-container').style.display = 'none';
        document.getElementById('dateRangeText').style.display = 'block';
      } else {
        const total = release - startDate;
        const elapsed = now - startDate;
        percentage = (elapsed / total) * 100;
        percentage = Math.max(0, Math.min(100, percentage));
        
        daysLeft = Math.ceil((release - now) / (1000 * 60 * 60 * 24));
        document.getElementById('daysLeft').textContent = `${daysLeft} Days Left Until Grand Theft Auto VI`;
        
        document.querySelector('.days-since-container').style.display = 'flex';
        document.getElementById('dateRangeText').style.display = 'none';
        
        const msSince = now - trailer2release;
        const daysSince = Math.floor(msSince / (1000 * 60 * 60 * 24));
        const hoursSince = Math.floor(msSince / (1000 * 60 * 60));
        const minutesSince = Math.floor(msSince / (1000 * 60));
        const secondsSince = Math.floor(msSince / 1000);

        const daysSinceElement = document.getElementById('daysSince');
        const currentMode = daysSinceModes[currentDaysSinceModeIndex];

        switch (currentMode) {
          case 'days':
            daysSinceElement.textContent = `${daysSince} Days Since TRAILER 2`;
            break;
          case 'hours':
            daysSinceElement.textContent = `${hoursSince} Hours Since TRAILER 2`;
            break;
          case 'minutes':
            daysSinceElement.textContent = `${minutesSince} Minutes Since TRAILER 2`;
            break;
          case 'seconds':
            daysSinceElement.textContent = `${secondsSince} Seconds Since TRAILER 2`;
            break;
        }
      }
      
      document.getElementById('percentage').textContent = percentage.toFixed(2) + '%';
      
      if (!isAlternativeMode) {
        updateAchievementsDisplay(percentage);
      }
    }

    function updateAchievementsDisplay(currentPercentage) {
      const achievementsList = document.getElementById('achievementsList');
      achievementsList.innerHTML = '';
      
      achievements.forEach(achievement => {
        const isUnlocked = currentPercentage >= achievement.targetPercentage;
        const achievementItem = document.createElement('div');
        achievementItem.className = `achievement-item ${isUnlocked ? 'unlocked' : 'locked'}`;
        
        achievementItem.innerHTML = `
          <div class="achievement-icon ${isUnlocked ? 'unlocked' : 'locked'}">
            ${isUnlocked ? 'üèÜ' : 'üîí'}
          </div>
          <div class="achievement-details">
            <div class="achievement-title">${achievement.title}</div>
            <div class="achievement-description">${achievement.description}</div>
            <div class="achievement-date">Target: ${achievement.targetDate.toLocaleDateString()}</div>
          </div>
        `;
        
        achievementsList.appendChild(achievementItem);
      });
    }

    function toggleDaysSinceMode(direction) {
      if (direction === 'next') {
        currentDaysSinceModeIndex = (currentDaysSinceModeIndex + 1) % daysSinceModes.length;
      } else if (direction === 'previous') {
        currentDaysSinceModeIndex = (currentDaysSinceModeIndex - 1 + daysSinceModes.length) % daysSinceModes.length;
      }

      clearInterval(secondsUpdateInterval);
      clearInterval(window.mainCountdownInterval);
      setupMainUpdateInterval();
      updateCountdownInfo();
    }

    function setupMainUpdateInterval() {
      clearInterval(window.mainCountdownInterval);
      clearInterval(secondsUpdateInterval);

      if (!isAlternativeMode && daysSinceModes[currentDaysSinceModeIndex] === 'seconds') {
        secondsUpdateInterval = setInterval(updateCountdownInfo, 1000);
      } else {
        window.mainCountdownInterval = setInterval(() => {
          updateCountdownInfo();
        }, 60 * 1000);
      }
    }

    function toggleCalculationMode() {
      isAlternativeMode = !isAlternativeMode;
      
      const bg1 = document.getElementById('bg1');
      const bg2 = document.getElementById('bg2');
      
      if (isAlternativeMode) {
        // Fade to bg2
        bg2.style.pointerEvents = 'auto';
        bg1.style.opacity = '0';
        setTimeout(() => {
          bg2.style.opacity = '1';
        }, 50);
      } else {
        // Fade to bg1
        bg2.style.pointerEvents = 'none';
        bg2.style.opacity = '0';
        setTimeout(() => {
          bg1.style.opacity = '1';
        }, 50);
      }
      
      const achievementsButton = document.querySelector('.achievements-button');
      if (achievementsButton) {
        achievementsButton.style.display = isAlternativeMode ? 'none' : 'inline-block';
      }
      
      // Update instant.
      clearInterval(secondsUpdateInterval);
      clearInterval(window.mainCountdownInterval);
      updateCountdownInfo();
      setupMainUpdateInterval();
    }

    function showInfo() {
      document.getElementById('infoModal').style.display = 'block';
    }
    function hideInfo() {
      document.getElementById('infoModal').style.display = 'none';
    }
    function showSettings() {
      document.getElementById('settingsModal').style.display = 'block';
    }
    function hideSettings() {
      document.getElementById('settingsModal').style.display = 'none';
    }
    function showAchievements() {
      if (!isAlternativeMode) {
        document.getElementById('achievementsModal').style.display = 'block';
      }
    }
    function hideAchievements() {
      document.getElementById('achievementsModal').style.display = 'none';
    }

    function updateArrowVisibility() {
      const toggleArrowsCheckbox = document.getElementById('toggleArrows');
      const cycleArrows = document.querySelectorAll('.cycle-arrow');
      
      if (toggleArrowsCheckbox && cycleArrows.length > 0) {
        const hideArrows = toggleArrowsCheckbox.checked;
        cycleArrows.forEach(arrow => {
          arrow.style.display = hideArrows ? 'none' : 'inline-block';
        });
        localStorage.setItem('hideArrows', hideArrows); 
      }
    }

    function saveAsPNG() {
        const elementToCapture = document.getElementById('background');
        const overlayElement = elementToCapture.querySelector('.overlay');

        const originalOverlayBg = overlayElement.style.backgroundColor;

        // Temp black background after saving image
        overlayElement.style.backgroundColor = 'rgba(0, 0, 0, 1)';

        html2canvas(elementToCapture, {
            backgroundColor: null,
            useCORS: true
        }).then(canvas => {
            overlayElement.style.backgroundColor = originalOverlayBg; 

            const link = document.createElement('a');
            link.download = 'gta6_countdown.png';
            link.href = canvas.toDataURL('image/png');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }).catch(err => {
            console.error("Error saving image:", err);
            alert("Error");
            overlayElement.style.backgroundColor = originalOverlayBg; 
        });
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      updateCountdownInfo();
      setupMainUpdateInterval();

      const toggleArrowsCheckbox = document.getElementById('toggleArrows');
      if (toggleArrowsCheckbox) {
        toggleArrowsCheckbox.addEventListener('change', updateArrowVisibility);

        const hideArrowsPreference = localStorage.getItem('hideArrows') === 'true';
        toggleArrowsCheckbox.checked = hideArrowsPreference; 
        updateArrowVisibility(); 
      }
    });
  </script>
</body>
</html>


